let ethAddress,contract;function getJson(){return new Promise(e=>{$.getJSON("../PolygonForest.json",t=>{e(t)})})}function etherToWei(e){return(1e18*e).toString()}function buyTool(e){let t;switch(e){case 0:t=etherToWei(0);break;case 1:t=etherToWei(.001);break;case 2:t=etherToWei(.01);break;case 3:t=etherToWei(.035)}contract.methods.mintTool(e).send({from:ethAddress,value:t}).once("error",e=>{console.log(e)}).then(e=>{console.log(e)})}function start(){$("#btn-buy-hatchet").click(()=>buyTool(0)),$("#btn-buy-axe").click(()=>buyTool(1)),$("#btn-buy-saw").click(()=>buyTool(2)),$("#btn-buy-chainsaw").click(()=>buyTool(3))}const connect=async()=>{if(window.ethereum){await window.ethereum.send("eth_requestAccounts");let e=new Web3(window.ethereum);try{const t=await window.ethereum.request({method:"eth_accounts"});if(t.length>0){const o=await window.ethereum.request({method:"eth_chainId"}),n=await getJson();137==o?(contract=new e.eth.Contract(n.abi,"0xb290dc212bc126627ba4939f7e63c4db41a6ea90"),ethAddress=t[0],start(),window.ethereum.on("accountsChanged",e=>{ethAddress=e[0]}),window.ethereum.on("chainChanged",()=>{window.location.reload()})):alert("Please change your network to Polygon")}else alert("Please sign in to your wallet")}catch(e){alert("Something went wrong (Check console for details)",e)}}else alert("Please install metamask")};connect();